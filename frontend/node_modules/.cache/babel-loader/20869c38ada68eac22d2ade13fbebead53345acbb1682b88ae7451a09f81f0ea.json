{"ast":null,"code":"import{useGetUserQuery}from'../store/authApi';import{Navigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";export function RequireAuth(_ref){var _location$state;let{children}=_ref;const{data:user,isLoading}=useGetUserQuery();if(isLoading){return/*#__PURE__*/_jsx(\"div\",{children:\"\\u041F\\u0440\\u043E\\u0432\\u0435\\u0440\\u043A\\u0430 \\u0430\\u0432\\u0442\\u043E\\u0440\\u0438\\u0437\\u0430\\u0446\\u0438\\u0438...\"});}if(!user&&!((_location$state=location.state)!==null&&_location$state!==void 0&&_location$state.fromLogout)){// ← Обходим для logout!\nreturn/*#__PURE__*/_jsx(Navigate,{to:\"/area-checker/login\",replace:true});}return user?children:/*#__PURE__*/_jsx(Navigate,{to:\"/area-checker/login\",replace:true});}","map":{"version":3,"names":["useGetUserQuery","Navigate","jsx","_jsx","RequireAuth","_ref","_location$state","children","data","user","isLoading","location","state","fromLogout","to","replace"],"sources":["C:/Users/m4shu/WebstormProjects/web4frontend/src/components/RequireAuth.jsx"],"sourcesContent":["import { useGetUserQuery } from '../store/authApi';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nexport function RequireAuth({ children }) {\r\n    const { data: user, isLoading } = useGetUserQuery();\r\n\r\n    if (isLoading) {\r\n        return <div>Проверка авторизации...</div>;\r\n    }\r\n\r\n    if (!user && !location.state?.fromLogout) {  // ← Обходим для logout!\r\n        return <Navigate to=\"/area-checker/login\" replace />;\r\n    }\r\n\r\n    return user ? children : <Navigate to=\"/area-checker/login\" replace />;\r\n}\r\n"],"mappings":"AAAA,OAASA,eAAe,KAAQ,kBAAkB,CAClD,OAASC,QAAQ,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5C,MAAO,SAAS,CAAAC,WAAWA,CAAAC,IAAA,CAAe,KAAAC,eAAA,IAAd,CAAEC,QAAS,CAAC,CAAAF,IAAA,CACpC,KAAM,CAAEG,IAAI,CAAEC,IAAI,CAAEC,SAAU,CAAC,CAAGV,eAAe,CAAC,CAAC,CAEnD,GAAIU,SAAS,CAAE,CACX,mBAAOP,IAAA,QAAAI,QAAA,CAAK,wHAAuB,CAAK,CAAC,CAC7C,CAEA,GAAI,CAACE,IAAI,EAAI,GAAAH,eAAA,CAACK,QAAQ,CAACC,KAAK,UAAAN,eAAA,WAAdA,eAAA,CAAgBO,UAAU,EAAE,CAAG;AACzC,mBAAOV,IAAA,CAACF,QAAQ,EAACa,EAAE,CAAC,qBAAqB,CAACC,OAAO,MAAE,CAAC,CACxD,CAEA,MAAO,CAAAN,IAAI,CAAGF,QAAQ,cAAGJ,IAAA,CAACF,QAAQ,EAACa,EAAE,CAAC,qBAAqB,CAACC,OAAO,MAAE,CAAC,CAC1E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}